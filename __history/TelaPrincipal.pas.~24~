unit TelaPrincipal;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TfrmTelaPrincipal = class(TForm)
    gpbNotas: TGroupBox;
    edtNota1: TEdit;
    edtNota2: TEdit;
    edtNota3: TEdit;
    lblNota1: TLabel;
    lblNota2: TLabel;
    lblNota3: TLabel;
    btnCalcularMedia: TButton;
    gpbResultado: TGroupBox;
    lblMediaFinal: TLabel;
    lblSituacao: TLabel;
    lblResultadoSituacao: TLabel;
    lblResultadoMediaFinal: TLabel;
    procedure btnCalcularMediaClick(Sender: TObject);
    procedure ValidaCampos(Sender: TObject);
  private
    { Private declarations }
    MediaFinal: double;
    Situacao: char;
    function CalcularMedia(nota1, nota2, nota3: Double): Double;
    procedure VerificarSituacao;
    procedure PreencheMediaFinal;
    procedure PreencheSituacao;
  public
    { Public declarations }
  end;

var
  frmTelaPrincipal: TfrmTelaPrincipal;

implementation

{$R *.dfm}

procedure TfrmTelaPrincipal.ValidaCampos(Sender: TObject);
var
  Nota: double;
begin
  if not TryStrToFloat(TEdit(Sender).Text, Nota) then
  begin
    ShowMessage('Digite apenas números.');
    TEdit(Sender).SetFocus;
    Exit;
  end;

  if (Nota < 0) or (Nota > 10) then
  begin
    ShowMessage('A nota deve estar entre 0 e 10.');
    TEdit(Sender).SetFocus;
    Exit;
  end;
end;

procedure TfrmTelaPrincipal.btnCalcularMediaClick(Sender: TObject);
begin
  var nota1: Double := StrToFloatDef(edtNota1.Text, 0);
  var nota2: Double := StrToFloatDef(edtNota2.Text, 0);
  var nota3: Double := StrToFloatDef(edtNota3.Text, 0);

  CalcularMedia(nota1, nota2, nota3);
  VerificarSituacao;
  PreencheMediaFinal;
  PreencheSituacao;
end;

function TfrmTelaPrincipal.CalcularMedia(nota1: Double; nota2: Double; nota3: Double): Double;
begin
  MediaFinal := (nota1 + nota2 + nota3) / 3;
  Result := MediaFinal;
end;

procedure TfrmTelaPrincipal.VerificarSituacao;
begin
  if (MediaFinal >= 7) then
    Situacao := 'A'
  else if (MediaFinal >= 5) and (MediaFinal <= 6.9) then
    Situacao := 'R'
  else
    Situacao := 'F'
end;

procedure TfrmTelaPrincipal.PreencheMediaFinal;
begin
  lblResultadoMediaFinal.Caption := FloatToStrF(MediaFinal, ffNumber, 7, 2);
end;

procedure TfrmTelaPrincipal.PreencheSituacao;
begin
  if (Situacao = 'A') then
  begin
    lblResultadoSituacao.Caption := '✅ Aprovado!';
    lblResultadoSituacao.Font.Color :=clGreen
  end
  else if (Situacao = 'R') then
  begin
    lblResultadoSituacao.Caption := '⚠ Recuperação';
    lblResultadoSituacao.Font.Color :=clOlive
  end
  else if (Situacao = 'F') then
  begin
    lblResultadoSituacao.Caption := '❎ Reprovado';
    lblResultadoSituacao.Font.Color :=clRed
  end;
end;

end.
